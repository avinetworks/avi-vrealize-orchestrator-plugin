package com.avi.avi.model;

import org.json.JSONObject;
import org.json.JSONArray;
import org.json.simple.JSONValue;

import java.io.BufferedReader;
import java.io.Closeable;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Base64;
import java.util.HashMap;
import java.util.Map;
import java.io.IOException;

public class pool {
	private String data;
	private session aviSession;
	
	
	public String set(HashMap values) {
		this.data = JSONValue.toJSONString(values);
		return data;
	}
	
	public String get() {
		return data;
	}
	
	public String setJSONData(String jsonData) {
		this.data = jsonData;
		return data;
	}
	
	public boolean deleteObject(String controllerIP, String username, String password) throws IOException {
		JSONObject jsnobject = (JSONObject) JSONValue.parse(data);
		String uuid = (String) jsnobject.get("uuid");
		aviSession.deleteAviObject(controllerIP, username, password, "pool", uuid);
		return true;
	}
	
	public String createAVIObject(String controllerIP, String username, String password) throws IOException {
		try {
			return aviSession.createAviObject(controllerIP, username, password, "pool", data);
			//return data;
		} catch (IOException exception) {
			return exception.toString();
		}
	}
}